# PRDレビュー結果 - わんこめネオンCSS調整

レビュー日: 2026-01-18
レビュアー: 10ペルソナ（SEC, PERF, SRE, QA, UX, DATA, BIZ, LEGAL, ARCH, EXT）

---

## サマリー

| カテゴリ | 件数 | 対応状況 |
|---------|------|---------|
| ❌ Critical | 0 | - |
| ⚠️ Warning | 3 | 検討推奨 |
| 💡 Info | 7 | 任意対応 |

**総合評価**: ✅ **承認可能**（Warningの対応を推奨）

---

## ❌ Critical（必須対応）

**なし** - すべての必須要件は満たされています

---

## ⚠️ Warning（推奨対応）

### 1. [PERF] パフォーマンス - text-shadowのGPU負荷

**指摘**: 7層→3層に削減したが、配信環境での実測が必要

**リスク**:
- 大量のコメントが流れる配信でfps低下の可能性
- GPU性能の低い環境での動作未検証

**提案**:
1. OBS Browser Source での fps 測定（推奨）
2. コメント大量流入時の負荷テスト
3. 必要に応じて2層まで削減を検討

**対応優先度**: 中（配信環境に依存）

---

### 2. [UX] 可読性 - 背景とネオン色のコントラスト

**指摘**: 背景 #e0e0e0（明るいグレー）+ シアン (#0ff) + 白ベース (#fff) の組み合わせ

**問題点**:
- シアン (#0ff) は明度が高く、明るいグレー背景で薄く見える
- 白シャドウ (#fff) がほぼ見えない可能性
- テキスト色 (#fff) も白で、グレー背景では読みにくい

**提案A: テキスト色を変更**
```css
--lcv-text-color: #000;  /* 白 → 黒 */
--lcv-name-color: #000;  /* 白 → 黒 */
```
→ テキスト本体を黒、ネオンをアクセントに

**提案B: 背景を調整**
```css
--lcv-background-color: #d0d0d0;  /* #e0e0e0 → やや濃いめ */
```
→ コントラストを確保

**提案C: ネオン色を調整**
```css
--neon-color: #00d4ff;  /* より濃いシアン */
```
→ 視認性向上

**対応優先度**: 高（可読性に直結）

---

### 3. [QA] テストケース - エッジケース未定義

**指摘**: 以下のケースでの動作が未定義

**未検証ケース**:
1. 長文コメント（100文字以上）
   - 折り返し時のネオン効果の見え方
   - 複数行でのレイアウト崩れ

2. 絵文字・特殊文字
   - フォントフォールバック時の表示
   - ネオン効果の適用範囲

3. 配信画面との重ね合わせ
   - 背景がゲーム画面（動的）の場合
   - 半透明要素との相性

**提案**: 受け入れ基準に追加
```markdown
- [ ] 長文コメント（100文字以上）で正常表示
- [ ] 絵文字が含まれるコメントで正常表示
- [ ] 配信画面（ゲーム等）と重ねて視認性確保
- [ ] 複数コメント同時表示（5件以上）で fps 維持
```

**対応優先度**: 中（実環境テストで確認）

---

## 💡 Info（検討推奨）

### 4. [ARCH] CSS変数のカスタマイズ性

**指摘**: 調整版CSSは固定値、ユーザーが微調整できない

**提案**: スケール変数を導入
```css
:root {
    --neon-intensity-scale: 1.0; /* 0.5〜2.0 で調整可能 */
    --lcv-neon-shadow:
        0 0 calc(3px * var(--neon-intensity-scale)) var(--neon-base-color),
        0 0 calc(6px * var(--neon-intensity-scale)) var(--neon-color),
        0 0 calc(9px * var(--neon-intensity-scale)) var(--neon-color);
}
```

**メリット**: 配信者が1変数変更するだけで強度調整可能

---

### 5. [UX] ダークモード対応

**指摘**: 明るいグレー固定、暗い配信画面では不向き

**提案**: 背景色切り替え用のコメントを用意
```css
/* ライトモード（デフォルト） */
--lcv-background-color: #e0e0e0;

/* ダークモード（手動変更） */
/* --lcv-background-color: rgba(20, 20, 20, 0.9); */
```

**メリット**: 配信環境に応じて切り替え可能

---

### 6. [SRE] 運用 - ロールバック手順

**指摘**: 問題発生時の戻し方が不明確

**提案**: README または PRD に追加
```markdown
## ロールバック手順
1. OBS Browser Source の CSS URL を変更
   - `adjusted_neon.css` → `original_neon.css`
2. Browser Source をリロード
3. 元の強いネオン効果に戻ります
```

---

### 7. [DATA] データ整合性 - 未使用変数の整理

**指摘**: `--lcv-name-shadow-1〜5`, `--lcv-comment-shadow-1〜5` が定義されているが未使用

**評価**: 今回は問題なし
- 既存システムに影響しない
- わんこめの内部で使用されている可能性

**提案**: 将来的にクリーンアップを検討（今回は対象外）

---

### 8. [BIZ] ビジネス価値 - 優先度の妥当性

**分析**: CSS調整のみで配信体験が向上するか？

**評価**: ✅ 妥当
- **低コスト**: CSS変更のみ、実装工数 < 1h
- **即効性**: すぐに適用可能、配信者が自分で試せる
- **リスク低**: ロールバック容易、破壊的変更なし
- **効果**: 視認性向上 → コメント拾い率アップ → 配信品質向上

**ROI**: 高い（工数対効果）

---

### 9. [LEGAL] 法務 - ライセンス確認

**指摘**: わんこめのCSSテンプレートのライセンスが不明

**確認事項**:
- 公式テンプレートの場合、再配布・改変の許諾
- カスタムテンプレートの場合、問題なし

**提案**:
- わんこめ公式ドキュメントでライセンスを確認
- 個人利用目的であれば通常は問題なし

---

### 10. [EXT] 外部連携 - OBSバージョン互換性

**指摘**: OBS Browser Source のバージョンによる挙動差

**推奨環境**:
- **OBS Studio**: 28.x 以降
- **理由**: Chromium 91+ 搭載、CSS変数・calc() が安定

**古いバージョン（27.x以前）**:
- CSS変数が未対応の可能性
- `calc()` の挙動が不安定

**提案**: PRDまたはREADMEに記載
```markdown
## 動作環境
- OBS Studio 28.0 以降を推奨
- Browser Source の Chromium バージョン: 91+
```

---

## 推奨対応順

| 優先度 | 項目 | 工数 | 効果 |
|-------|------|------|------|
| 🔴 高 | Warning #2: テキスト色の調整 | 5分 | 可読性大幅向上 |
| 🟡 中 | Warning #1: fpsテスト | 30分 | パフォーマンス検証 |
| 🟡 中 | Warning #3: エッジケーステスト | 30分 | 品質保証 |
| 🟢 低 | Info #4: カスタマイズ変数 | 15分 | 柔軟性向上 |
| 🟢 低 | Info #6: ロールバック手順 | 10分 | 運用性向上 |

---

## 次のアクション

### オプション1: 即時承認
- Warningを許容してそのまま実装
- 実環境テストで問題があれば修正

### オプション2: Warning #2のみ対応
- テキスト色を黒に変更（5分）
- 可読性を確保してから実装

### オプション3: 全Warning対応
- テキスト色調整 + fpsテスト + エッジケーステスト
- 完璧を期してから実装

**推奨**: オプション2（テキスト色調整のみ実施）
