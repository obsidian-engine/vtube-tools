<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🎭 Discord立ち絵CSS生成ツール</title>
    <meta name="description" content="2025年最新！Discord StreamKit→OBS配信用立ち絵CSS生成。発話で跳ね・光るアニメ対応">
    <meta name="keywords" content="Discord,立ち絵,CSS,OBS,配信,VTuber,StreamKit">
    <meta name="author" content="Discord CSS Generator">
    
    <!-- Open Graph -->
    <meta property="og:title" content="Discord立ち絵CSS生成ツール">
    <meta property="og:description" content="Discord StreamKit用の立ち絵CSSを簡単生成">
    <meta property="og:type" content="website">
    <meta property="og:image" content="/assets/og-image.png">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/assets/favicon.svg">
    <link rel="alternate icon" href="/assets/favicon.ico">
    
    <!-- PWA -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#667eea">
    
    <!-- CSS -->
    <link rel="stylesheet" href="/src/style.css">
</head>
<body>
    <div class="app">
        <!-- ヘッダー -->
        <header class="header">
            <div class="header-content">
                <h1 class="header-title">
                    🎭 Discord立ち絵CSS生成ツール
                </h1>
                <p class="header-subtitle">
                    OBS配信でリアルタイム立ち絵表示
                </p>
            </div>
        </header>

        <!-- メインコンテンツ -->
        <main class="main">
            <div class="container">
                <!-- 入力フォームエリア -->
                <section class="input-section">
                    <div class="form-card">
                        <h2 class="section-title">
                            ⚙️ 設定
                        </h2>
                        
                        <!-- ユーザーID -->
                        <div class="form-group">
                            <label for="user-id" class="form-label">
                                🆔 DiscordユーザーID <span class="required">*</span>
                            </label>
                            <input 
                                type="text" 
                                id="user-id" 
                                class="form-input"
                                placeholder=""
                                pattern="[0-9]+"
                                required
                            >
                            <small class="form-hint">
                                💡 <strong>ID取得方法</strong>: Discord設定 → 詳細設定 → 「開発者モード」をON → 自分を右クリック → 「ユーザーIDをコピー」<br>
                                📍 18桁の数字・StreamKit設定で使用するIDです
                            </small>
                        </div>

                        <!-- 画像URL -->
                        <div class="form-group">
                            <label for="image-url" class="form-label">
                                🖼️ 立ち絵画像URL <span class="required">*</span>
                            </label>
                            <input 
                                type="url" 
                                id="image-url" 
                                class="form-input"
                                placeholder="https://cdn.discordapp.com/attachments/.../image.png"
                                required
                            >
                            <small class="form-hint">
                                💡 Discord添付ファイルリンクまたは外部画像URL<br>
                                🖼️ 透過PNG推奨（背景なし立ち絵）
                            </small>
                        </div>

                        <!-- 詳細設定（折りたたみ） -->
                        <details class="advanced-settings">
                            <summary class="advanced-toggle">
                                🔧 詳細設定
                            </summary>
                            
                            <div class="advanced-content">
                                <!-- 画像サイズ -->
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="image-width" class="form-label">
                                            📏 幅 (px)
                                        </label>
                                        <input 
                                            type="range" 
                                            id="image-width" 
                                            class="form-range"
                                            min="100" 
                                            max="800" 
                                            value="400"
                                        >
                                        <span class="range-value" id="width-value">400</span>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="image-height" class="form-label">
                                            📐 高さ (px)
                                        </label>
                                        <input 
                                            type="range" 
                                            id="image-height" 
                                            class="form-range"
                                            min="100" 
                                            max="1000" 
                                            value="600"
                                        >
                                        <span class="range-value" id="height-value">600</span>
                                    </div>
                                </div>

                                <!-- アニメーション設定 -->
                                <div class="form-group">
                                    <label for="bounce-height" class="form-label">
                                        🦘 跳ねる高さ (px)
                                    </label>
                                    <input 
                                        type="range" 
                                        id="bounce-height" 
                                        class="form-range"
                                        min="0" 
                                        max="50" 
                                        value="15"
                                    >
                                    <span class="range-value" id="bounce-value">15</span>
                                </div>

                                <!-- プリセット -->
                                <div class="form-group">
                                    <label for="preset" class="form-label">
                                        🎨 プリセット
                                    </label>
                                    <select id="preset" class="form-select">
                                        <option value="">カスタム</option>
                                        <option value="small">小サイズ (300x450)</option>
                                        <option value="medium">中サイズ (400x600)</option>
                                        <option value="large">大サイズ (500x750)</option>
                                        <option value="wide">横長 (600x400)</option>
                                    </select>
                                </div>

                                <!-- ファイル名設定 -->
                                <div class="form-group">
                                    <label for="filename" class="form-label">
                                        📁 ファイル名
                                    </label>
                                    <input 
                                        type="text" 
                                        id="filename" 
                                        class="form-input"
                                        placeholder="例: 立ち絵_太郎"
                                        maxlength="50"
                                    >
                                    <small class="form-hint">
                                        💡 空欄の場合は「discord_tachie_ユーザーID」になります<br>
                                        🚫 使用不可文字: \ / : * ? " &lt; &gt; |
                                    </small>
                                </div>
                            </div>
                        </details>

                        <!-- アクションボタン -->
                        <div class="form-actions">
                            <button type="button" id="generate-btn" class="btn btn-primary">
                                ✨ CSS生成
                            </button>
                            <button type="button" id="reset-btn" class="btn btn-secondary">
                                🔄 リセット
                            </button>
                        </div>
                    </div>
                </section>

                <!-- プレビュー・出力エリア -->
                <section class="output-section">
                    <div class="output-card">
                        <h2 class="section-title">
                            📋 生成されたCSS
                        </h2>
                        
                        <!-- CSS出力 -->
                        <div class="css-output">
                            <div class="output-header">
                                <span class="file-name" id="css-filename">discord_tachie.css</span>
                                <div class="output-actions">
                                    <button type="button" id="copy-btn" class="btn btn-outline" title="クリップボードにコピー">
                                        📋 コピー
                                    </button>
                                    <button type="button" id="download-btn" class="btn btn-outline" title="CSSファイルをダウンロード">
                                        💾 ダウンロード
                                    </button>
                                </div>
                            </div>
                            <pre class="css-code" id="css-output"><code>/* CSS生成ボタンをクリックしてください */</code></pre>
                        </div>

                        <!-- 使い方ガイド -->
                        <div class="usage-guide">
                            <h3 class="guide-title">
                                📖 使い方
                            </h3>
                            <ol class="guide-steps">
                                <li>
                                    <strong><a href="https://streamkit.discord.com/overlay" target="_blank" rel="noopener">Discord StreamKit</a></strong> にアクセス
                                </li>
                                <li>
                                    <strong>「Voice Widget」</strong>を選択
                                </li>
                                <li>
                                    <strong>SERVER</strong>で対象サーバー、<strong>VOICE CHANNEL</strong>で対象ボイスチャンネルを選択
                                </li>
                                <li>
                                    右側プレビューを確認し、<strong>「Copy」</strong>ボタンでURLを取得<br>
                                    <small>（例: https://streamkit.discord.com/overlay/voice/サーバーID/チャンネルID）</small>
                                </li>
                                <li>
                                    <strong>OBS Studio</strong> で「ブラウザ」ソースを新規追加
                                </li>
                                <li>
                                    URLにコピーしたStreamKit URLを貼り付け
                                </li>
                                <li>
                                    ブラウザソースの「カスタムCSS」に上記で生成されたCSSをコピー&ペースト
                                </li>
                                <li>
                                    🎉 完成！発話時に立ち絵が跳ねて光ります
                                </li>
                            </ol>
                            
                            <div style="margin-top: 1rem; padding: 1rem; background: rgba(79, 172, 254, 0.1); border-left: 4px solid #4facfe; border-radius: 8px;">
                                <h4 style="margin: 0 0 0.5rem 0; color: #4facfe;">💡 StreamKit設定のコツ</h4>
                                <ul style="margin: 0 0 1rem 0; padding-left: 1.2rem; line-height: 1.6;">
                                    <li><strong>正確な手順</strong>：StreamKit → Voice Widget → SERVER/VOICE CHANNEL選択 → Copy</li>
                                    <li><strong>URL構造</strong>：<code>https://streamkit.discord.com/overlay/voice/サーバーID/チャンネルID</code></li>
                                    <li><strong>キャッシュ更新</strong>：表示されない場合はOBSでページを更新（右クリック→更新）</li>
                                    <li><strong>複数サーバー</strong>：サーバー切り替え時は必ずSERVER/CHANNELを再選択</li>
                                </ul>
                                
                                <h4 style="margin: 0 0 0.5rem 0; color: #4facfe;">🎛️ OBS推奨設定</h4>
                                <div style="overflow-x: auto;">
                                    <table style="width: 100%; border-collapse: collapse; font-size: 0.9rem;">
                                        <tr style="background: rgba(79, 172, 254, 0.1);">
                                            <th style="padding: 0.5rem; border: 1px solid #ddd; text-align: left;">項目</th>
                                            <th style="padding: 0.5rem; border: 1px solid #ddd; text-align: left;">推奨値</th>
                                        </tr>
                                        <tr>
                                            <td style="padding: 0.5rem; border: 1px solid #ddd;"><strong>幅</strong></td>
                                            <td style="padding: 0.5rem; border: 1px solid #ddd;">800</td>
                                        </tr>
                                        <tr style="background: rgba(79, 172, 254, 0.05);">
                                            <td style="padding: 0.5rem; border: 1px solid #ddd;"><strong>高さ</strong></td>
                                            <td style="padding: 0.5rem; border: 1px solid #ddd;">600</td>
                                        </tr>
                                        <tr>
                                            <td style="padding: 0.5rem; border: 1px solid #ddd;"><strong>カスタムフレームレート</strong></td>
                                            <td style="padding: 0.5rem; border: 1px solid #ddd;">30</td>
                                        </tr>
                                        <tr style="background: rgba(79, 172, 254, 0.05);">
                                            <td style="padding: 0.5rem; border: 1px solid #ddd;"><strong>CSS再読み込み</strong></td>
                                            <td style="padding: 0.5rem; border: 1px solid #ddd;">ページを更新</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        <!-- フッター -->
        <footer class="footer">
            <div class="footer-content">
                <p>&copy; 2025 Discord立ち絵CSS生成ツール</p>
                <p>
                    <a href="https://github.com/your-username/vtube-tools" target="_blank" rel="noopener">
                        GitHub
                    </a>
                    ・
                    <a href="../unique-name/" target="_blank">
                        YouTube Live ユーザー抽出
                    </a>
                </p>
            </div>
        </footer>

        <!-- トースト通知 -->
        <div class="toast" id="toast">
            <span class="toast-message" id="toast-message"></span>
        </div>
    </div>

    <!-- JavaScript -->
    <script type="module" src="/src/main.js"></script>
</body>
</html>