# ğŸ­ VTubeç”¨LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç®¡ç†ãƒ„ãƒ¼ãƒ« è©³ç´°ä»•æ§˜æ›¸

## ğŸ“‹ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

### ğŸ¯ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç›®æ¨™

**ç›®æ¨™**: VTuberãŒç°¡å˜ã«LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ç®¡ç†ã§ãã‚‹ç›´æ„Ÿçš„ãªè¨­å®šãƒšãƒ¼ã‚¸ã®æ§‹ç¯‰

### ğŸ¨ ä¸»è¦æ©Ÿèƒ½
1. **ãƒªãƒƒãƒãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®è¨­å®šãƒ»ç·¨é›†** - ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã«ã‚ˆã‚‹ç›´æ„Ÿçš„ãªãƒ¡ãƒ‹ãƒ¥ãƒ¼ä½œæˆ
2. **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡æ©Ÿèƒ½** - å³æ™‚é€ä¿¡ãƒ»äºˆç´„é€ä¿¡ãƒ»ãƒãƒ«ã‚¯é€ä¿¡å¯¾å¿œ  
3. **è‡ªå‹•è¿”ä¿¡Botè¨­å®š** - ãƒãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã®ãƒ•ãƒ­ãƒ¼ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã«ã‚ˆã‚‹Botä½œæˆ

### ğŸ‘¥ ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼
- **æŠ€è¡“ãƒ¬ãƒ™ãƒ«**: åˆå¿ƒè€…ã€œä¸­ç´šè€…ã®VTuber
- **è¦ä»¶**: ç°¡å˜ã§ç›´æ„Ÿçš„ãªè¨­å®šãŒã§ãã‚‹ã“ã¨
- **KPI**: 
  - åˆå›è¨­å®šå®Œäº†ç‡ 85%ä»¥ä¸Š
  - ãƒªãƒƒãƒãƒ¡ãƒ‹ãƒ¥ãƒ¼ä¿å­˜ã¾ã§ã®å¹³å‡æ“ä½œã‚¹ãƒ†ãƒƒãƒ—æ•° â‰¤ 5
  - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡/äºˆç´„å¤±æ•—ç‡ < 1%

---

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ

### ğŸ“± ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- **Next.js 15** (App Router) - React SSR/SSGãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **TypeScript** - å‹å®‰å…¨æ€§ç¢ºä¿
- **Tailwind CSS** - ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆCSS
- **Radix UI** - ã‚¢ã‚¯ã‚»ã‚·ãƒ–ãƒ«ãªUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- **Framer Motion** - ã‚¹ãƒ ãƒ¼ã‚ºãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
- **Zustand** - è»½é‡çŠ¶æ…‹ç®¡ç†

### ğŸ”§ ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯  
- **Next.js API Routes** - ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰API
- **@line/bot-sdk** - LINE Messaging API SDK
- **PostgreSQL** - ãƒ¡ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- **Redis** - ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ãƒ»ã‚­ãƒ¥ãƒ¼ã‚·ã‚¹ãƒ†ãƒ 
- **Prisma ORM** - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ORM

### ğŸ” èªè¨¼ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- **LINE Login v2.1** - ã‚·ãƒ³ã‚°ãƒ«ã‚µã‚¤ãƒ³ã‚ªãƒ³
- **JWT (RS256)** - ãƒˆãƒ¼ã‚¯ãƒ³ãƒ™ãƒ¼ã‚¹èªè¨¼  
- **HTTPSå¼·åˆ¶** - ã‚»ã‚­ãƒ¥ã‚¢ãªé€šä¿¡
- **Webhookç½²åæ¤œè¨¼** - LINE APIã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æº–æ‹ 

---

## ğŸ¨ UI/UXè¨­è¨ˆ

### ğŸ“ ãƒ¡ã‚¤ãƒ³ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ­ VTube LINEè¨­å®šãƒ‘ãƒãƒ«    [ğŸ””] [âš™ï¸] [ğŸ‘¤]          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ğŸ“Š ãƒ€ãƒƒã‚·ãƒ¥ â”‚                                        â”‚
â”‚ğŸ¨ ãƒªãƒƒãƒãƒ¡ â”‚        ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢            â”‚
â”‚ğŸ“¤ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸â”‚                                        â”‚ 
â”‚ğŸ¤– è‡ªå‹•è¿”ä¿¡ â”‚                                        â”‚
â”‚ğŸ“ˆ åˆ†æ     â”‚                                        â”‚
â”‚âš™ï¸ è¨­å®š     â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“± ãƒªãƒƒãƒãƒ¡ãƒ‹ãƒ¥ãƒ¼è¨­å®šç”»é¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¨ ãƒªãƒƒãƒãƒ¡ãƒ‹ãƒ¥ãƒ¼è¨­å®š                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ“± ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼]           [âš™ï¸ è¨­å®šãƒ‘ãƒãƒ«]           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚     iPhone      â”‚     â”‚ âœ¨ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé¸æŠ     â”‚â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚     â”‚ [6åˆ†å‰²] [8åˆ†å‰²] [ã‚«ã‚¹ã‚¿ãƒ ]â”‚â”‚
â”‚ â”‚ â”‚ãƒªãƒƒãƒãƒ¡ãƒ‹ãƒ¥ãƒ¼ â”‚ â”‚     â”‚                         â”‚â”‚
â”‚ â”‚ â”‚ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼    â”‚ â”‚     â”‚ ğŸ–¼ï¸ ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰      â”‚â”‚
â”‚ â”‚ â”‚             â”‚ â”‚     â”‚ [ğŸ“] ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—   â”‚â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚     â”‚                         â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ ğŸ”— ã‚¢ã‚¯ã‚·ãƒ§ãƒ³è¨­å®š       â”‚â”‚
â”‚                         â”‚ â€¢ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡        â”‚â”‚
â”‚                         â”‚ â€¢ URLé·ç§»              â”‚â”‚
â”‚                         â”‚ â€¢ ãƒã‚¹ãƒˆãƒãƒƒã‚¯          â”‚â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ¤– è‡ªå‹•è¿”ä¿¡Botè¨­å®šç”»é¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¤– è‡ªå‹•è¿”ä¿¡Botè¨­å®š                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ›ï¸ ãƒ•ãƒ­ãƒ¼ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼]      [ğŸ“‹ ãƒ—ãƒªã‚»ãƒƒãƒˆ]          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚    é–‹å§‹         â”‚       â”‚ âœ¨ ã‚ˆãä½¿ã†ãƒ‘ã‚¿ãƒ¼ãƒ³  â”‚  â”‚
â”‚ â”‚     â†“           â”‚       â”‚ â€¢ FAQå¿œç­”Bot        â”‚  â”‚
â”‚ â”‚ ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰åˆ¤å®š   â”‚  â†â”€â”€  â”‚ â€¢ æŠ½é¸Bot          â”‚  â”‚
â”‚ â”‚     â†“           â”‚       â”‚ â€¢ å•ã„åˆã‚ã›å—ä»˜    â”‚  â”‚
â”‚ â”‚ è¿”ä¿¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸   â”‚       â”‚ â€¢ é…ä¿¡é€šçŸ¥Bot       â”‚  â”‚
â”‚ â”‚     â†“           â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚ â”‚    çµ‚äº†         â”‚                                â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                                                    â”‚
â”‚ [ğŸ§ª ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ] [ğŸ’¾ ä¿å­˜] [ğŸš€ æœ¬ç•ªé©ç”¨]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¾ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

```sql
-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†
CREATE TABLE users (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  line_user_id VARCHAR(50) UNIQUE NOT NULL,
  display_name VARCHAR(100),
  avatar_url VARCHAR(255),
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- LINE ãƒãƒ£ãƒãƒ«è¨­å®š
CREATE TABLE line_channels (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  channel_id VARCHAR(20) NOT NULL,
  channel_secret VARCHAR(100) NOT NULL,
  channel_access_token TEXT NOT NULL,
  webhook_url VARCHAR(255),
  is_active BOOLEAN DEFAULT true,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- ãƒªãƒƒãƒãƒ¡ãƒ‹ãƒ¥ãƒ¼ç®¡ç†
CREATE TABLE rich_menus (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  channel_id UUID REFERENCES line_channels(id) ON DELETE CASCADE,
  name VARCHAR(100) NOT NULL,
  layout_config JSONB NOT NULL,
  image_url VARCHAR(255),
  is_published BOOLEAN DEFAULT false,
  scheduled_at TIMESTAMP,
  line_rich_menu_id VARCHAR(50),
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- è‡ªå‹•è¿”ä¿¡ãƒ•ãƒ­ãƒ¼
CREATE TABLE bot_flows (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  channel_id UUID REFERENCES line_channels(id) ON DELETE CASCADE,
  name VARCHAR(100) NOT NULL,
  flow_config JSONB NOT NULL,
  is_active BOOLEAN DEFAULT false,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡å±¥æ­´
CREATE TABLE message_campaigns (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  channel_id UUID REFERENCES line_channels(id) ON DELETE CASCADE,
  name VARCHAR(100) NOT NULL,
  message_type VARCHAR(20) NOT NULL, -- 'push', 'multicast', 'broadcast'
  content JSONB NOT NULL,
  target_users JSONB,
  scheduled_at TIMESTAMP,
  sent_at TIMESTAMP,
  status VARCHAR(20) DEFAULT 'draft', -- 'draft', 'scheduled', 'sending', 'sent', 'failed'
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆ
CREATE INDEX idx_users_line_user_id ON users(line_user_id);
CREATE INDEX idx_line_channels_user_id ON line_channels(user_id);
CREATE INDEX idx_rich_menus_channel_id ON rich_menus(channel_id);
CREATE INDEX idx_bot_flows_channel_id ON bot_flows(channel_id);
CREATE INDEX idx_message_campaigns_channel_id ON message_campaigns(channel_id);
```

---

## ğŸ› ï¸ å®Ÿè£…æ©Ÿèƒ½è©³ç´°

### 1. ğŸ¨ ãƒªãƒƒãƒãƒ¡ãƒ‹ãƒ¥ãƒ¼æ©Ÿèƒ½

#### TypeScriptå‹å®šç¾©
```typescript
// types/line.ts
export interface RichMenuConfig {
  size: {
    width: number;
    height: number;
  };
  selected: boolean;
  name: string;
  chatBarText: string;
  areas: RichMenuArea[];
}

export interface RichMenuArea {
  bounds: {
    x: number;
    y: number;
    width: number;
    height: number;
  };
  action: LineAction;
}

export type LineAction = 
  | { type: 'message'; text: string }
  | { type: 'uri'; uri: string }
  | { type: 'postback'; data: string; displayText?: string };
```

#### APIå®Ÿè£…ä¾‹
```typescript
// app/api/rich-menu/route.ts
import { NextRequest } from 'next/server';
import { MessagingApiClient } from '@line/bot-sdk';
import { getServerSession } from 'next-auth';

export async function POST(req: NextRequest) {
  try {
    const session = await getServerSession();
    if (!session) {
      return Response.json({ error: 'Unauthorized' }, { status: 401 });
    }

    const { name, layout, imageUrl } = await req.json();
    
    const client = new MessagingApiClient({
      channelAccessToken: process.env.LINE_CHANNEL_ACCESS_TOKEN!
    });

    // ãƒªãƒƒãƒãƒ¡ãƒ‹ãƒ¥ãƒ¼ä½œæˆ
    const richMenu = await client.createRichMenu({
      size: layout.size,
      selected: false,
      name: name,
      chatBarText: layout.chatBarText,
      areas: layout.areas
    });

    // ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
    if (imageUrl) {
      await client.setRichMenuImage(richMenu.richMenuId, {
        /* ç”»åƒãƒ‡ãƒ¼ã‚¿ */
      });
    }

    // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä¿å­˜
    const savedMenu = await prisma.richMenus.create({
      data: {
        channelId: session.user.channelId,
        name: name,
        layoutConfig: layout,
        imageUrl: imageUrl,
        lineRichMenuId: richMenu.richMenuId
      }
    });

    return Response.json({ 
      success: true, 
      richMenuId: richMenu.richMenuId,
      id: savedMenu.id 
    });

  } catch (error) {
    console.error('Rich menu creation error:', error);
    return Response.json({ 
      error: 'Failed to create rich menu' 
    }, { status: 500 });
  }
}
```

### 2. ğŸ“¤ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡æ©Ÿèƒ½

#### ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡API
```typescript
// app/api/messages/route.ts
export async function POST(req: NextRequest) {
  try {
    const { type, to, messages, scheduledAt } = await req.json();
    
    const client = new MessagingApiClient({
      channelAccessToken: process.env.LINE_CHANNEL_ACCESS_TOKEN!
    });

    let result;
    switch (type) {
      case 'push':
        result = await client.pushMessage({ to, messages });
        break;
      case 'multicast':
        result = await client.multicast({ to, messages });
        break;
      case 'broadcast':
        result = await client.broadcast({ messages });
        break;
    }

    // é€ä¿¡å±¥æ­´ä¿å­˜
    await prisma.messageCampaigns.create({
      data: {
        channelId: session.user.channelId,
        name: `${type}_${Date.now()}`,
        messageType: type,
        content: { messages },
        targetUsers: to ? (Array.isArray(to) ? to : [to]) : null,
        sentAt: new Date(),
        status: 'sent'
      }
    });

    return Response.json({ success: true, result });

  } catch (error) {
    return Response.json({ error: error.message }, { status: 500 });
  }
}
```

### 3. ğŸ¤– è‡ªå‹•è¿”ä¿¡Botæ©Ÿèƒ½

#### Webhookå‡¦ç†
```typescript
// app/api/webhook/route.ts
import crypto from 'crypto';

export async function POST(req: NextRequest) {
  try {
    const signature = req.headers.get('x-line-signature');
    const body = await req.text();

    // ç½²åæ¤œè¨¼
    if (!validateLineSignature(body, signature!, process.env.LINE_CHANNEL_SECRET!)) {
      return new Response('Unauthorized', { status: 401 });
    }

    const { events } = JSON.parse(body);
    
    for (const event of events) {
      if (event.type === 'message' && event.message.type === 'text') {
        await handleMessageEvent(event);
      } else if (event.type === 'postback') {
        await handlePostbackEvent(event);
      }
    }

    return new Response('OK');

  } catch (error) {
    console.error('Webhook error:', error);
    return new Response('Internal Server Error', { status: 500 });
  }
}

async function handleMessageEvent(event: any) {
  const userMessage = event.message.text;
  const replyToken = event.replyToken;

  // Bot ãƒ•ãƒ­ãƒ¼å–å¾—ãƒ»å®Ÿè¡Œ
  const activeFlows = await prisma.botFlows.findMany({
    where: { 
      channelId: event.source.userId, // å®Ÿéš›ã¯ãƒãƒ£ãƒãƒ«IDã‚’é©åˆ‡ã«å–å¾—
      isActive: true 
    }
  });

  for (const flow of activeFlows) {
    const response = await processBotFlow(flow.flowConfig, userMessage);
    if (response) {
      const client = new MessagingApiClient({
        channelAccessToken: process.env.LINE_CHANNEL_ACCESS_TOKEN!
      });
      
      await client.replyMessage({
        replyToken,
        messages: [response]
      });
      break; // æœ€åˆã«ãƒãƒƒãƒã—ãŸãƒ•ãƒ­ãƒ¼ã®ã¿å®Ÿè¡Œ
    }
  }
}

function validateLineSignature(body: string, signature: string, channelSecret: string): boolean {
  const hash = crypto
    .createHmac('SHA256', channelSecret)
    .update(body, 'utf8')
    .digest('base64');
    
  return hash === signature;
}
```

---

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆãƒ»ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ 

### ğŸ“‚ æ¨å¥¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
vtube-tools/
â”œâ”€â”€ app/                              # æ—¢å­˜ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç¾¤
â”‚   â”œâ”€â”€ discord-css-generator/        # æ—¢å­˜
â”‚   â”œâ”€â”€ create-tachie-move-css/       # æ—¢å­˜  
â”‚   â””â”€â”€ line-official-manager/        # æ–°è¦è¿½åŠ  â­
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ app/                  # Next.js 15 App Router
â”‚       â”‚   â”‚   â”œâ”€â”€ layout.tsx        # ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚       â”‚   â”‚   â”œâ”€â”€ page.tsx          # ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸
â”‚       â”‚   â”‚   â”œâ”€â”€ globals.css       # ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«
â”‚       â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx      # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ layout.tsx
â”‚       â”‚   â”‚   â”œâ”€â”€ rich-menu/
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx      # ãƒªãƒƒãƒãƒ¡ãƒ‹ãƒ¥ãƒ¼è¨­å®š
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ editor/
â”‚       â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx  # ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ç”»é¢
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ templates/
â”‚       â”‚   â”‚   â”‚       â””â”€â”€ page.tsx  # ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä¸€è¦§
â”‚       â”‚   â”‚   â”œâ”€â”€ messages/
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx      # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ broadcast/
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ scheduled/
â”‚       â”‚   â”‚   â”œâ”€â”€ bot/
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx      # è‡ªå‹•è¿”ä¿¡è¨­å®š
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ flows/
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ templates/
â”‚       â”‚   â”‚   â”œâ”€â”€ analytics/
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ page.tsx      # åˆ†æç”»é¢
â”‚       â”‚   â”‚   â”œâ”€â”€ settings/
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ page.tsx      # è¨­å®šç”»é¢
â”‚       â”‚   â”‚   â””â”€â”€ api/              # API Routes
â”‚       â”‚   â”‚       â”œâ”€â”€ auth/
â”‚       â”‚   â”‚       â”‚   â””â”€â”€ route.ts  # LINE Loginèªè¨¼
â”‚       â”‚   â”‚       â”œâ”€â”€ webhook/
â”‚       â”‚   â”‚       â”‚   â””â”€â”€ route.ts  # LINE Webhook
â”‚       â”‚   â”‚       â”œâ”€â”€ rich-menu/
â”‚       â”‚   â”‚       â”‚   â”œâ”€â”€ route.ts  # CRUD API
â”‚       â”‚   â”‚       â”‚   â””â”€â”€ [id]/
â”‚       â”‚   â”‚       â”œâ”€â”€ messages/
â”‚       â”‚   â”‚       â”‚   â””â”€â”€ route.ts  # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡API
â”‚       â”‚   â”‚       â””â”€â”€ bot/
â”‚       â”‚   â”‚           â””â”€â”€ route.ts  # Botè¨­å®šAPI
â”‚       â”‚   â”œâ”€â”€ components/           # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚       â”‚   â”‚   â”œâ”€â”€ ui/              # åŸºæœ¬UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ button.tsx
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ input.tsx
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ modal.tsx
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ toast.tsx
â”‚       â”‚   â”‚   â”œâ”€â”€ rich-menu/       # ãƒªãƒƒãƒãƒ¡ãƒ‹ãƒ¥ãƒ¼é–¢é€£
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ RichMenuEditor.tsx
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ TemplateSelector.tsx
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ PreviewPanel.tsx
â”‚       â”‚   â”‚   â”œâ”€â”€ bot/             # Boté–¢é€£
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ FlowEditor.tsx
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ NodeEditor.tsx
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ TestPanel.tsx
â”‚       â”‚   â”‚   â””â”€â”€ layout/          # ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚       â”‚   â”‚       â”œâ”€â”€ Sidebar.tsx
â”‚       â”‚   â”‚       â”œâ”€â”€ Header.tsx
â”‚       â”‚   â”‚       â””â”€â”€ Navigation.tsx
â”‚       â”‚   â”œâ”€â”€ lib/                 # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ»è¨­å®š
â”‚       â”‚   â”‚   â”œâ”€â”€ line-client.ts   # LINE API ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚       â”‚   â”‚   â”œâ”€â”€ database.ts      # DBæ¥ç¶šè¨­å®š
â”‚       â”‚   â”‚   â”œâ”€â”€ auth.ts          # èªè¨¼è¨­å®š
â”‚       â”‚   â”‚   â”œâ”€â”€ utils.ts         # æ±ç”¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚       â”‚   â”‚   â””â”€â”€ validations.ts   # ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
â”‚       â”‚   â”œâ”€â”€ hooks/               # ã‚«ã‚¹ã‚¿ãƒ Hooks
â”‚       â”‚   â”‚   â”œâ”€â”€ useLineAuth.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ useRichMenu.ts
â”‚       â”‚   â”‚   â””â”€â”€ useBotFlow.ts
â”‚       â”‚   â”œâ”€â”€ types/               # TypeScriptå‹å®šç¾©
â”‚       â”‚   â”‚   â”œâ”€â”€ line.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ database.ts
â”‚       â”‚   â”‚   â””â”€â”€ api.ts
â”‚       â”‚   â””â”€â”€ styles/              # ã‚¹ã‚¿ã‚¤ãƒ«é–¢é€£
â”‚       â”‚       â”œâ”€â”€ globals.css
â”‚       â”‚       â””â”€â”€ components.css
â”‚       â”œâ”€â”€ prisma/                  # Prisma ORM
â”‚       â”‚   â”œâ”€â”€ schema.prisma
â”‚       â”‚   â””â”€â”€ migrations/
â”‚       â”œâ”€â”€ public/                  # é™çš„ãƒ•ã‚¡ã‚¤ãƒ«
â”‚       â”‚   â”œâ”€â”€ images/
â”‚       â”‚   â”œâ”€â”€ icons/
â”‚       â”‚   â””â”€â”€ templates/
â”‚       â”œâ”€â”€ package.json
â”‚       â”œâ”€â”€ next.config.js
â”‚       â”œâ”€â”€ tailwind.config.js
â”‚       â”œâ”€â”€ tsconfig.json
â”‚       â”œâ”€â”€ .env.local.example
â”‚       â””â”€â”€ README.md
â”œâ”€â”€ docs/                            # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ LINE-Setup-Guide.md         # LINEè¨­å®šã‚¬ã‚¤ãƒ‰
â”‚   â”œâ”€â”€ Development-Guide.md        # é–‹ç™ºã‚¬ã‚¤ãƒ‰
â”‚   â”œâ”€â”€ Deployment-Guide.md         # ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¬ã‚¤ãƒ‰
â”‚   â””â”€â”€ LINE-Official-Manager-Specification.md # æœ¬ä»•æ§˜æ›¸
â””â”€â”€ README.md                       # æ›´æ–°ç‰ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“README
```

### âš™ï¸ ä¸»è¦è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

#### package.json
```json
{
  "name": "line-official-manager",
  "version": "1.0.0",
  "description": "VTubeç”¨LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç®¡ç†ãƒ„ãƒ¼ãƒ«",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "type-check": "tsc --noEmit",
    "db:push": "prisma db push",
    "db:studio": "prisma studio",
    "db:migrate": "prisma migrate dev",
    "db:generate": "prisma generate"
  },
  "dependencies": {
    "@line/bot-sdk": "^9.4.0",
    "@prisma/client": "^5.19.0",
    "@radix-ui/react-dialog": "^1.1.0",
    "@radix-ui/react-select": "^2.1.0",
    "@radix-ui/react-toast": "^1.2.0",
    "@radix-ui/react-dropdown-menu": "^2.1.0",
    "framer-motion": "^11.5.0",
    "next": "15.1.8",
    "react": "19.0.0",
    "react-dom": "19.0.0",
    "typescript": "^5.6.0",
    "zustand": "^5.0.0",
    "tailwindcss": "^3.4.0",
    "redis": "^4.7.0",
    "jsonwebtoken": "^9.0.2",
    "bcryptjs": "^2.4.3",
    "zod": "^3.23.0",
    "react-hook-form": "^7.53.0",
    "@hookform/resolvers": "^3.9.0",
    "date-fns": "^3.6.0"
  },
  "devDependencies": {
    "@types/node": "^22.0.0",
    "@types/react": "^19.0.0",
    "@types/react-dom": "^19.0.0",
    "@types/jsonwebtoken": "^9.0.6",
    "@types/bcryptjs": "^2.4.6",
    "prisma": "^5.19.0",
    "eslint": "^9.0.0",
    "eslint-config-next": "15.1.8",
    "autoprefixer": "^10.4.20",
    "postcss": "^8.4.41"
  },
  "engines": {
    "node": ">=18.0.0"
  }
}
```

#### next.config.js
```javascript
/** @type {import('next').NextConfig} */
const nextConfig = {
  images: {
    domains: [
      'cdn.line.me', 
      'scdn.line-apps.com',
      'profile.line-scdn.net'
    ],
  },
  env: {
    LINE_CHANNEL_ID: process.env.LINE_CHANNEL_ID,
    LINE_CHANNEL_SECRET: process.env.LINE_CHANNEL_SECRET,
    LINE_CHANNEL_ACCESS_TOKEN: process.env.LINE_CHANNEL_ACCESS_TOKEN,
  },
  experimental: {
    serverActions: true,
  },
  async headers() {
    return [
      {
        source: '/api/webhook',
        headers: [
          {
            key: 'Access-Control-Allow-Origin',
            value: '*',
          },
          {
            key: 'Access-Control-Allow-Methods',
            value: 'POST',
          },
          {
            key: 'Access-Control-Allow-Headers',
            value: 'Content-Type, x-line-signature',
          },
        ],
      },
    ]
  },
};

module.exports = nextConfig;
```

#### .env.local.example
```bash
# LINE Messaging API
LINE_CHANNEL_ID=your_channel_id
LINE_CHANNEL_SECRET=your_channel_secret
LINE_CHANNEL_ACCESS_TOKEN=your_channel_access_token

# Database
DATABASE_URL="postgresql://username:password@localhost:5432/line_official_manager"

# Redis
REDIS_URL="redis://localhost:6379"

# NextAuth
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=your_nextauth_secret

# Application
APP_URL=http://localhost:3000
WEBHOOK_URL=https://your-domain.com/api/webhook
```

---

## ğŸš€ é–‹ç™ºãƒ•ã‚§ãƒ¼ã‚ºãƒ»å®Ÿè£…å„ªå…ˆåº¦

### ğŸ“… Phase 1: åŸºç›¤æ§‹ç¯‰ (2-3é€±é–“)

#### Week 1
- [x] **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**
  - Next.js 15ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–
  - TypeScriptãƒ»Tailwind CSSãƒ»Prismaè¨­å®š
  - åŸºæœ¬çš„ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ æ§‹ç¯‰

- [x] **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆãƒ»æ§‹ç¯‰**
  - PostgreSQLã‚¹ã‚­ãƒ¼ãƒè¨­è¨ˆ
  - Prismaã‚¹ã‚­ãƒ¼ãƒä½œæˆ
  - ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ

#### Week 2
- [x] **èªè¨¼ã‚·ã‚¹ãƒ†ãƒ **
  - LINE Login OAuth2.0å®Ÿè£…
  - JWT ãƒˆãƒ¼ã‚¯ãƒ³ç®¡ç†
  - ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
  - èªè¨¼ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢

#### Week 3
- [x] **åŸºæœ¬UI/UXãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**
  - ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
  - ã‚µã‚¤ãƒ‰ãƒãƒ¼ãƒ»ãƒ˜ãƒƒãƒ€ãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
  - åŸºæœ¬çš„ãªUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒª

### ğŸ“… Phase 2: ã‚³ã‚¢æ©Ÿèƒ½å®Ÿè£… (4-5é€±é–“)

#### Week 4-5
- [x] **ãƒªãƒƒãƒãƒ¡ãƒ‹ãƒ¥ãƒ¼æ©Ÿèƒ½**
  - ãƒªãƒƒãƒãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ç”»é¢
  - ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—æ©Ÿèƒ½
  - ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ©Ÿèƒ½
  - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½

#### Week 6-7
- [x] **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡æ©Ÿèƒ½**
  - å³æ™‚é€ä¿¡ï¼ˆPush Messageï¼‰
  - äºˆç´„é€ä¿¡æ©Ÿèƒ½
  - ãƒãƒ«ã‚¯é€ä¿¡ï¼ˆMulticast/Broadcastï¼‰
  - é€ä¿¡å±¥æ­´ç®¡ç†

#### Week 8
- [x] **LINE APIçµ±åˆ**
  - Webhook ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
  - ç½²åæ¤œè¨¼å®Ÿè£…
  - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
  - ãƒ¬ãƒ¼ãƒˆåˆ¶é™å¯¾å¿œ

### ğŸ“… Phase 3: é«˜åº¦æ©Ÿèƒ½ (3-4é€±é–“)

#### Week 9-10
- [x] **è‡ªå‹•è¿”ä¿¡Bot**
  - ãƒãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ãƒ•ãƒ­ãƒ¼ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼
  - æ¡ä»¶åˆ†å²ãƒ­ã‚¸ãƒƒã‚¯
  - ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚·ã‚¹ãƒ†ãƒ 
  - ãƒ†ã‚¹ãƒˆæ©Ÿèƒ½

#### Week 11
- [x] **åˆ†æãƒ»ãƒ¬ãƒãƒ¼ãƒˆ**
  - é€ä¿¡å±¥æ­´ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
  - é–‹å°ç‡ãƒ»ã‚¯ãƒªãƒƒã‚¯ç‡è¿½è·¡
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼è¡Œå‹•åˆ†æ
  - CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½

#### Week 12
- [x] **æœ€é©åŒ–ãƒ»ãƒ†ã‚¹ãƒˆ**
  - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
  - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»
  - ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
  - E2Eãƒ†ã‚¹ãƒˆ

---

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è€ƒæ…®äº‹é …

### ğŸ›¡ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–

#### Webhookç½²åæ¤œè¨¼
```typescript
// lib/security.ts
import crypto from 'crypto';

export function validateLineSignature(
  body: string, 
  signature: string, 
  channelSecret: string
): boolean {
  const hash = crypto
    .createHmac('SHA256', channelSecret)
    .update(body, 'utf8')
    .digest('base64');
    
  return hash === signature;
}

export function sanitizeInput(input: string): string {
  return input
    .replace(/[<>\"'&]/g, (char) => {
      const chars: Record<string, string> = {
        '<': '&lt;',
        '>': '&gt;',
        '"': '&quot;',
        "'": '&#x27;',
        '&': '&amp;'
      };
      return chars[char] || char;
    });
}
```

#### ãƒ¬ãƒ¼ãƒˆåˆ¶é™å®Ÿè£…
```typescript
// lib/rate-limit.ts
import { Redis } from 'redis';

const redis = new Redis(process.env.REDIS_URL);

export async function rateLimit(
  identifier: string, 
  limit: number = 100, 
  window: number = 3600
): Promise<{ success: boolean; remaining: number }> {
  const key = `rate_limit:${identifier}`;
  const current = await redis.incr(key);
  
  if (current === 1) {
    await redis.expire(key, window);
  }
  
  const remaining = Math.max(0, limit - current);
  const success = current <= limit;
  
  return { success, remaining };
}
```

### âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

#### Redisã‚­ãƒ£ãƒƒã‚·ãƒ¥æ´»ç”¨
```typescript
// lib/cache.ts
import { Redis } from 'redis';

const redis = new Redis(process.env.REDIS_URL);

export async function getCachedRichMenu(id: string) {
  const cached = await redis.get(`rich_menu:${id}`);
  return cached ? JSON.parse(cached) : null;
}

export async function setCachedRichMenu(id: string, data: any, ttl: number = 3600) {
  await redis.setex(`rich_menu:${id}`, ttl, JSON.stringify(data));
}

export async function invalidateRichMenuCache(id: string) {
  await redis.del(`rich_menu:${id}`);
}
```

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æœ€é©åŒ–
```sql
-- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Šã®ãŸã‚ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
CREATE INDEX CONCURRENTLY idx_message_campaigns_status_scheduled 
ON message_campaigns(status, scheduled_at) 
WHERE status IN ('scheduled', 'sending');

CREATE INDEX CONCURRENTLY idx_bot_flows_active 
ON bot_flows(channel_id, is_active) 
WHERE is_active = true;

-- ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ‹ãƒ³ã‚°ï¼ˆå¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿å¯¾å¿œï¼‰
CREATE TABLE message_logs_y2024m01 PARTITION OF message_logs
FOR VALUES FROM ('2024-01-01') TO ('2024-02-01');
```

---

## ğŸ“ˆ æœŸå¾…ã•ã‚Œã‚‹æˆæœ

### ğŸ‘¥ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹
- **ğŸ“± ç›´æ„Ÿçš„æ“ä½œ**: 3åˆ†ä»¥å†…ã§ãƒªãƒƒãƒãƒ¡ãƒ‹ãƒ¥ãƒ¼ä½œæˆå®Œäº†
- **ğŸ¨ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼**: å³åº§ã«çµæœç¢ºèªå¯èƒ½
- **ğŸš€ ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯å…¬é–‹**: è¨­å®šã‹ã‚‰å…¬é–‹ã¾ã§ç°¡ç´ åŒ–
- **ğŸ“Š åˆ†æãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰**: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸åŠ¹æœã®å¯è¦–åŒ–

### ğŸ”§ æŠ€è¡“çš„ãƒ¡ãƒªãƒƒãƒˆ
- **âš¡ é«˜ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: Next.js SSR/SSGã«ã‚ˆã‚‹é«˜é€Ÿè¡¨ç¤º
- **ğŸ”’ ã‚»ã‚­ãƒ¥ã‚¢**: LINEå…¬å¼ã®èªè¨¼ãƒ»æš—å·åŒ–æ¨™æº–æº–æ‹ 
- **ğŸ¯ ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«**: Redisãƒ»PostgreSQLã«ã‚ˆã‚‹æ‹¡å¼µæ€§ç¢ºä¿
- **ğŸ› ï¸ ä¿å®ˆæ€§**: TypeScriptãƒ»Prismaã«ã‚ˆã‚‹å‹å®‰å…¨ãªé–‹ç™º

### ğŸ“Š ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤
- **ğŸ’° ã‚³ã‚¹ãƒˆå‰Šæ¸›**: å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹åˆ©ç”¨æ–™å‰Šæ¸›
- **â° æ™‚é–“çŸ­ç¸®**: è¨­å®šä½œæ¥­æ™‚é–“ã®å¤§å¹…çŸ­ç¸®
- **ğŸ“ˆ åŠ¹ç‡å‘ä¸Š**: ä¸€å…ƒç®¡ç†ã«ã‚ˆã‚‹é‹ç”¨åŠ¹ç‡åŒ–
- **ğŸ¯ ç²¾åº¦å‘ä¸Š**: ã‚¨ãƒ©ãƒ¼ç‡ã®å¤§å¹…æ¸›å°‘

---

## ğŸ¯ ä»Šå¾Œã®æ‹¡å¼µå¯èƒ½æ€§

### ğŸ”„ çŸ­æœŸçš„æ‹¡å¼µ (3-6ãƒ¶æœˆ)
- **ğŸ“± ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªåŒ–**: React Nativeå¯¾å¿œ
- **ğŸŒ å¤šè¨€èªå¯¾å¿œ**: i18nå®Ÿè£…
- **ğŸ”” é€šçŸ¥æ©Ÿèƒ½**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ 
- **ğŸ“Š é«˜åº¦ãªåˆ†æ**: AIæ©Ÿèƒ½ã«ã‚ˆã‚‹åŠ¹æœäºˆæ¸¬

### ğŸš€ é•·æœŸçš„æ‹¡å¼µ (6ãƒ¶æœˆä»¥ä¸Š)
- **ğŸ¤– AIæ©Ÿèƒ½**: è‡ªå‹•è¿”ä¿¡å†…å®¹ã®AIç”Ÿæˆ
- **ğŸ”— å¤–éƒ¨é€£æº**: YouTubeãƒ»Twitteré€£æº
- **ğŸ“¦ ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ **: ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£æ‹¡å¼µå¯¾å¿œ
- **â˜ï¸ ã‚¯ãƒ©ã‚¦ãƒ‰åŒ–**: SaaSåŒ–å±•é–‹

---

## ğŸ‰ ã¾ã¨ã‚

æœ¬ä»•æ§˜æ›¸ã§ã¯ã€VTuberå‘ã‘LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç®¡ç†ãƒ„ãƒ¼ãƒ«ã®åŒ…æ‹¬çš„ãªè¨­è¨ˆã‚’è¡Œã„ã¾ã—ãŸã€‚

### âœ… **è¨­è¨ˆå®Œäº†é …ç›®**
- ğŸ“‹ è©³ç´°ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- ğŸ¨ UI/UXè¨­è¨ˆãƒ»ãƒ¢ãƒƒã‚¯ã‚¢ãƒƒãƒ—
- ğŸ’¾ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ
- ğŸ› ï¸ å®Ÿè£…æ©Ÿèƒ½è©³ç´°ï¼ˆã‚³ãƒ¼ãƒ‰ä¾‹ä»˜ãï¼‰
- ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ææ¡ˆ
- ğŸš€ æ®µéšçš„é–‹ç™ºè¨ˆç”»
- ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å¯¾ç­–

### ğŸ¯ **æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**
1. **ğŸ—ï¸ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–**: æ¨å¥¨æ§‹é€ ã§ã®ç’°å¢ƒæ§‹ç¯‰
2. **ğŸ” LINE Developer Consoleè¨­å®š**: ãƒãƒ£ãƒãƒ«ä½œæˆãƒ»èªè¨¼æƒ…å ±å–å¾—
3. **ğŸ’» é–‹ç™ºç’°å¢ƒæº–å‚™**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ»Redisç’°å¢ƒæ§‹ç¯‰
4. **ğŸš€ Phase 1å®Ÿè£…é–‹å§‹**: åŸºç›¤æ§‹ç¯‰ã‹ã‚‰æ®µéšçš„é–‹ç™º

æœ¬ä»•æ§˜ã«å¾“ã£ã¦å®Ÿè£…ã™ã‚‹ã“ã¨ã§ã€VTuberã®çš†ã•ã‚“ãŒç°¡å˜ã‹ã¤åŠ¹æœçš„ã«LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’é‹ç”¨ã§ãã‚‹ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªãƒ„ãƒ¼ãƒ«ã®å®Ÿç¾ãŒå¯èƒ½ã§ã™ã€‚

---

**ğŸ“… ä½œæˆæ—¥**: 2025å¹´1æœˆ1æ—¥  
**ğŸ‘¤ ä½œæˆè€…**: Claude (Anthropic)  
**ğŸ“ ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0  
**ğŸ”„ æœ€çµ‚æ›´æ–°**: 2025å¹´1æœˆ1æ—¥